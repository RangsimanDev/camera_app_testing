<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TestCamera</title>
    <link rel='stylesheet' href='{% static "css/imagePage.css" %}'>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="imagePage.css">
</head>

<body>
    <main>
        <div class='title'>
            <p>วัดความสุกและดิบของทุเรียน</p>
            <p class='subtitle'>“ ด้วยภาพ ”</p>
        </div>
        <video id='camera--view' autoplay></video>
        <!-- <div class='container'>
            
        </div> -->
        <div class='btn-group'>
            <button type='button' id='camera--open' style="width: 25rem; height:6rem;">
                <span class="material-symbols-outlined" style="font-size: 50px;">photo_camera</span>
            </button>
            <button id="switch-camera" style="width: 25rem; height:6rem;">กล้องหน้า</button>
        </div>
    </main>

    <script>
        // Set constraints for the video stream
        var constraints = { video: { facingMode: "environment" }, audio: false };
        // Define constants
        const cameraView = document.querySelector("#camera--view"),
            cameraOpen = document.querySelector("#camera--open"),
            switchCameraBtn = document.querySelector("#switch-camera");

        // Access the device camera and stream to cameraView
        function cameraStart() {
            navigator.mediaDevices
                .getUserMedia(constraints)
                .then(function (stream) {
                    cameraView.srcObject = stream;
                })
                .catch(function (error) {
                    console.error("Oops. Something is broken.", error);
                });
        }

        // Function to switch between front and back camera
        // function switchCamera() {
        //     currentFacingMode = currentFacingMode === "user" ? "environment" : "user";
        //     cameraStart();
        // }

        // Start the video stream when the window loads
        cameraOpen.onclick = function () {
            cameraStart();
        }

        // Switch camera button click event
        // switchCameraBtn.onclick = function () {
        //     switchCamera();
        // }
    </script>

</body>

</html>